{"ast":null,"code":"import { projectStorage, projectFirestore, timeStamp } from '../firebase';\n\nconst uploadData = data => {\n  console.log(\"uploding aadhar data\");\n  return new Promise((resolve, reject) => {\n    const collectionRef = projectFirestore.collection('adharCardData');\n\n    try {\n      var ref = collectionRef.add({ ...data,\n        \"createdAt\": timeStamp()\n      });\n      ref.then(ref => {\n        console.log(\"ref:\", ref);\n        resolve(ref);\n      });\n    } catch (error) {}\n  }); // .then((ref) => {\n  //     console.log(\"Added doc: \", ref);\n  //     // Added doc with ID:  ZzhIgLqELaoE3eSsOazu\n  //     return ref.id;\n  // });\n};\n\nconst uploadPhoto = (image, refId, fileType) => {\n  return new Promise((resolve, reject) => {\n    if (image) {\n      // filePhoto.name =\"abcxyz\"\n      const storageRef = projectStorage.ref(image.name);\n      const collectionRef = projectFirestore.collection('adharCardData');\n      storageRef.put(image).on('state_changed', snap => {// let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\n        // setProgress(percentage);\n        // console.log(\"percentage\");\n      }, err => {\n        console.log(\"err: \", err);\n      }, async () => {\n        const url = await storageRef.getDownloadURL(); // const createdAt = timeStamp();\n        // await collectionRef.add({ url, createdAt });\n        //find by id and update url\n\n        await collectionRef.doc(refId).update({\n          [fileType]: url\n        });\n        console.log(fileType, \" uploaded to firebase\"); // setUrl(url);\n      }); // console.log(\"image uploaded made\");\n    }\n  });\n};\n\nexport { uploadData, uploadPhoto };","map":{"version":3,"sources":["G:/naiti/react/formEasy/form-easy-frontend/src/firebase/addData.js"],"names":["projectStorage","projectFirestore","timeStamp","uploadData","data","console","log","Promise","resolve","reject","collectionRef","collection","ref","add","then","error","uploadPhoto","image","refId","fileType","storageRef","name","put","on","snap","err","url","getDownloadURL","doc","update"],"mappings":"AAAA,SAASA,cAAT,EAAyBC,gBAAzB,EAA2CC,SAA3C,QAA4D,aAA5D;;AAEA,MAAMC,UAAU,GAAIC,IAAD,IAAU;AACzBC,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AAEA,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,UAAMC,aAAa,GAAGT,gBAAgB,CAACU,UAAjB,CAA4B,eAA5B,CAAtB;;AACA,QAAI;AACA,UAAIC,GAAG,GAAGF,aAAa,CAACG,GAAd,CAAkB,EAAE,GAAGT,IAAL;AAAW,qBAAaF,SAAS;AAAjC,OAAlB,CAAV;AACAU,MAAAA,GAAG,CAACE,IAAJ,CAAUF,GAAD,IAAS;AACdP,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBM,GAApB;AACAJ,QAAAA,OAAO,CAACI,GAAD,CAAP;AACH,OAHD;AAKH,KAPD,CAOE,OAAOG,KAAP,EAAc,CAEf;AAGJ,GAdM,CAAP,CAHyB,CAmBzB;AACA;AACA;AACA;AACA;AACH,CAxBD;;AA4BA,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,KAAR,EAAeC,QAAf,KAA4B;AAC5C,SAAO,IAAIZ,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,QAAIQ,KAAJ,EAAW;AACP;AACA,YAAMG,UAAU,GAAGpB,cAAc,CAACY,GAAf,CAAmBK,KAAK,CAACI,IAAzB,CAAnB;AACA,YAAMX,aAAa,GAAGT,gBAAgB,CAACU,UAAjB,CAA4B,eAA5B,CAAtB;AAEAS,MAAAA,UAAU,CAACE,GAAX,CAAeL,KAAf,EAAsBM,EAAtB,CAAyB,eAAzB,EAA2CC,IAAD,IAAU,CAChD;AACA;AACA;AACH,OAJD,EAIIC,GAAD,IAAS;AACRpB,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBmB,GAApB;AACH,OAND,EAMG,YAAY;AACX,cAAMC,GAAG,GAAG,MAAMN,UAAU,CAACO,cAAX,EAAlB,CADW,CAEX;AACA;AAEA;;AAEA,cAAMjB,aAAa,CAACkB,GAAd,CAAkBV,KAAlB,EAAyBW,MAAzB,CAAgC;AAClC,WAACV,QAAD,GAAaO;AADqB,SAAhC,CAAN;AAGArB,QAAAA,OAAO,CAACC,GAAR,CAAYa,QAAZ,EAAsB,uBAAtB,EAVW,CAWX;AAEH,OAnBD,EALO,CAyBP;AACH;AACJ,GA5BM,CAAP;AA6BH,CA9BD;;AAgCA,SAAShB,UAAT,EAAqBa,WAArB","sourcesContent":["import { projectStorage, projectFirestore, timeStamp } from '../firebase';\r\n\r\nconst uploadData = (data) => {\r\n    console.log(\"uploding aadhar data\");\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const collectionRef = projectFirestore.collection('adharCardData');\r\n        try {\r\n            var ref = collectionRef.add({ ...data, \"createdAt\": timeStamp() })\r\n            ref.then((ref) => {\r\n                console.log(\"ref:\", ref);\r\n                resolve(ref)\r\n            })\r\n            \r\n        } catch (error) {\r\n            \r\n        }\r\n        \r\n\r\n    })\r\n\r\n    // .then((ref) => {\r\n    //     console.log(\"Added doc: \", ref);\r\n    //     // Added doc with ID:  ZzhIgLqELaoE3eSsOazu\r\n    //     return ref.id;\r\n    // });\r\n}\r\n\r\n\r\n\r\nconst uploadPhoto = (image, refId, fileType) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (image) {\r\n            // filePhoto.name =\"abcxyz\"\r\n            const storageRef = projectStorage.ref(image.name);\r\n            const collectionRef = projectFirestore.collection('adharCardData');\r\n\r\n            storageRef.put(image).on('state_changed', (snap) => {\r\n                // let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n                // setProgress(percentage);\r\n                // console.log(\"percentage\");\r\n            }, (err) => {\r\n                console.log(\"err: \",err);\r\n            }, async () => {\r\n                const url = await storageRef.getDownloadURL();\r\n                // const createdAt = timeStamp();\r\n                // await collectionRef.add({ url, createdAt });\r\n\r\n                //find by id and update url\r\n\r\n                await collectionRef.doc(refId).update({\r\n                    [fileType] : url\r\n                });\r\n                console.log(fileType, \" uploaded to firebase\");\r\n                // setUrl(url);\r\n\r\n            });\r\n            // console.log(\"image uploaded made\");\r\n        }\r\n    })\r\n}\r\n\r\nexport { uploadData, uploadPhoto };"]},"metadata":{},"sourceType":"module"}